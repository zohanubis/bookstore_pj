@using QuanLySach.Models;
@model List<GioHang>


<h2>DƠN ĐẶT HÀNG</h2>
    <div class="card border-dark">
        <table class="table">
            <tr style="background-color:lightyellow">
                <th>MÃ SÁCH</th>
                <th>TÊN SÁCH</th>
                <th>ẢNH BÌA</th>
                <th>SỐ LƯỢNG</th>
                <th>ĐƠN GIÁ</th>
                <th>THÀNH TIỀN</th>


            </tr>
            @foreach (var item in Model)
            {
                <tr>
                    <td width="12%">@item.MaSach</td>
                    <td width="26%">@item.TenSach</td>
                    <td width="22%"><img src="~/Content/HinhAnhSP/@item.AnhBia" width="150%" /></td>
                    @using (Html.BeginForm("CapNhatGioHang", "GioHang", new { @MaSP = item.MaSach }))
                    {
                        <td width="12%"><input type="number" min="1" name="txtSoLuong" value="@item.SoLuong" size="2" /></td>
                        <td width="12%">@String.Format("{0:0,0}", item.DonGia)</td>
                        <td width="16%">@String.Format("{0:0,0}", item.ThanhTien)</td>
                        <td><a href="@Url.Action("XemChiTiet", "Sach", new { @ms = item.MaSach })">Detail</a></td>
                        <td>@Html.ActionLink("Delete", "XoaGioHang", new { @MaSP = item.MaSach })</td>
                        <td><input type="submit" value="Update" class="btn btn-primary" /></td>
                    }

                </tr>
                <tr style="background-color:lightyellow">
                    <td colspan="3" style="color:blue;font-weight:bold;text-align:right;">Tổng cộng</td>
                    <td style="color:red;font-weight:bold">@ViewBag.TongSoLuong</td>
                    <td></td>
                    <td style="color:red;font-weight:bold"> @string.Format("{0:N0}", @ViewBag.TongThanhTien) VND</td>
                    <td></td>
                    <td></td>

                </tr>
            }

        </table>

    </div>

    <h2 style="text-align: center">THÔNG TIN ĐẶT HÀNG</h2>
    @{
        taiKhoan tk = new taiKhoan(Convert.ToInt32(Session["id"]));
    }
    <table align="center">
        @using (Html.BeginForm())
        {
            <tr>
                <td>Họ Tên Khách Hàng</td>
                <td>@tk.hoTen</td>
            </tr>
            <tr>
                <td>Địa Chỉ</td>
                <td>@tk.diaChi</td>
            </tr>
            <tr>
                <td>Số Điện Thoại</td>
                <td>@tk.soDienThoai</td>
            </tr>
            <tr>
                <td>Ngày Đặt</td>
                <td>@DateTime.Now.ToShortDateString()</td>
            </tr>
            <tr>
                <td>Ngày Giao Hàng</td>
                <td><input type="date" name="NgayGiao" value="" /></td>
            </tr>
            <tr>
                <td></td>
                <td><a href="#"><input type="submit" value="Đặt Hàng" /></a></td>
            </tr>
        }
    </table>



